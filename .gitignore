/*
 * Game.java
 * 
 * Author: Tyler Boie
 * 
 * This program is designed to test and use the Zombie.java created to make a zombie NPC
 * 
 * Work in progress
 * 
 * 
 * Change Log
 * 12/3/2015: Added a wall object
 * 12/2/2015: Zombies can be spawned at the click of a button
 * 			Stopwatch was also created to run time checks
 * 11/30/2015: Zombie is created and can wander the screen
 * 
 * Bugs:
 * Zombie sometimes spawns where not supposed to
 */

import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

@SuppressWarnings("serial")
public class Game extends JPanel implements MouseListener {
	
	Game game = this;
	
	int border = 10;
	
	int maxZombies = 25;
	int maxWalls = 25;
	
	Zombie[] zom = new Zombie[maxZombies];
	int numZombies = 0;
	
	Wall[] walls = new Wall[maxWalls];
	int numWalls = 0;
	
	StopWatch timer = new StopWatch();
	
	public Game() {
		addKeyListener(new KeyListener() {
			@Override
			public void keyTyped(KeyEvent e) {
			}

			@Override
			public void keyReleased(KeyEvent e) {
			}

			@Override
			public void keyPressed(KeyEvent e) {
			}
			
		});
		setFocusable(true);
		
		addMouseListener(this);		//initiates mouse listener
	}
	
	private void move() {
		if(numZombies > 0)
			for(int i = 0; i < numZombies; i++)
				zom[i].move();
	}
	
	public void paint(Graphics g) {
		super.paint(g);
		Graphics2D g2d = (Graphics2D) g;
		g2d.setRenderingHint(RenderingHints.KEY_ANTIALIASING,
				RenderingHints.VALUE_ANTIALIAS_ON);
		if(numZombies > 0)
			for(int i = 0; i < numZombies; i++)
				zom[i].paint(g2d);
		if(numWalls > 0)
			for(int i = 0; i < numWalls; i++)
				walls[i].paint(g2d);
		
		g2d.setColor(Color.GRAY);
		g2d.setFont(new Font("Verdana", Font.BOLD, 30));
		g2d.drawString(String.valueOf(timer.getTime()), 10, 30);
		
	}
	
	public static void main(String[] args) throws InterruptedException {
		JFrame frame = new JFrame("Zombie");
		Game game = new Game();
		frame.add(game);
		frame.setSize(1000, 600);
		frame.setVisible(true);
		frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
		
		
		while (true) {
			game.move();
			game.repaint();
			Thread.sleep(10);
		}
}

	@Override
	public void mousePressed(MouseEvent e) {
		if(e.isAltDown())
			if(numZombies < maxZombies){		//can spawn up to the max number of zombies
				zom[numZombies] = new Zombie(e, game);
				numZombies ++;
			}
			else{}
		else
			if(numWalls < maxWalls){		//can spawn up to the max number of zombies
				walls[numWalls] = new Wall(e, game, 10, 10);
				numWalls ++;
			}
				
	}

	@Override
	public void mouseReleased(MouseEvent e) {
		// TODO Auto-generated method stub
		
	}

	@Override
	public void mouseEntered(MouseEvent e) {
		// TODO Auto-generated method stub
		
	}

	@Override
	public void mouseExited(MouseEvent e) {
		// TODO Auto-generated method stub
		
	}
	
	@Override
	public void mouseClicked(MouseEvent e) {
		
	    
	}
	
}
